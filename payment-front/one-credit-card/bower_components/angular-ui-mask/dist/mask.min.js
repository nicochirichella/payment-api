/*!
 * angular-ui-mask
 * https://github.com/angular-ui/ui-mask
 * Version: 1.7.0 - 2016-01-05T16:11:20.191Z
 * License: MIT
 */
!function(){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0,partialValue:!1,eventsToHandle:["input","keyup","click","focus"]}).directive("uiMask",["uiMaskConfig",function(e){function n(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var t=e;return function(e,a,i,r){function u(e){return angular.isDefined(e)?(k(e),B?(h(),d(),!0):f()):f()}function l(e){e&&(_=e,!B||0===a.val().length&&angular.isDefined(i.placeholder)||a.val(m(p(a.val()))))}function o(){return u(i.uiMask)}function c(e){return B?(R=p(e||""),H=v(R),r.$setValidity("mask",H),(G.partialValue||H)&&R.length?m(R):void 0):e}function s(e){return B?(R=p(e||""),H=v(R),r.$viewValue=R.length?m(R):"",r.$setValidity("mask",H),G.partialValue||H?W?r.$viewValue:R:void 0):e}function f(){return B=!1,g(),angular.isDefined(q)?a.attr("placeholder",q):a.removeAttr("placeholder"),angular.isDefined(I)?a.attr("maxlength",I):a.removeAttr("maxlength"),a.val(r.$modelValue),r.$viewValue=r.$modelValue,!1}function h(){R=F=p(r.$modelValue||""),T=z=m(R),H=v(R),i.maxlength&&a.attr("maxlength",2*P[P.length-1]),q||a.attr("placeholder",_);for(var e=r.$modelValue,n=r.$formatters.length;n--;)e=r.$formatters[n](e);r.$viewValue=e||"",r.$render()}function d(){L||(a.bind("blur",y),a.bind("mousedown mouseup",E),a.bind(G.eventsToHandle.join(" "),V),L=!0)}function g(){L&&(a.unbind("blur",y),a.unbind("mousedown",E),a.unbind("mouseup",E),a.unbind("input",V),a.unbind("keyup",V),a.unbind("click",V),a.unbind("focus",V),L=!1)}function v(e){return e.length?e.length>=j:!0}function p(e){var n="",t=S.slice();return e=e.toString(),angular.forEach(C,function(n){e=e.replace(n,"")}),angular.forEach(e.split(""),function(e){t.length&&t[0].test(e)&&(n+=e,t.shift())}),n}function m(e){var n="",t=P.slice();return angular.forEach(_.split(""),function(a,i){e.length&&i===t[0]?(n+=e.charAt(0)||"_",e=e.substr(1),t.shift()):n+=a}),n}function b(e){var n,t=angular.isDefined(i.uiMaskPlaceholder)?i.uiMaskPlaceholder:i.placeholder;return angular.isDefined(t)&&t[e]?t[e]:(n=angular.isDefined(i.uiMaskPlaceholderChar)&&i.uiMaskPlaceholderChar?i.uiMaskPlaceholderChar:"_","space"===n.toLowerCase()?" ":n[0])}function $(){var e,n=_.split("");return P&&!isNaN(P[0])&&angular.forEach(P,function(e){n[e]="_"}),e=n.join(""),e.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function k(e){var n=0;if(P=[],S=[],_="",angular.isString(e)){j=0;var t=!1,a=0,i=e.split("");angular.forEach(i,function(e,i){G.maskDefinitions[e]?(P.push(n),_+=b(i-a),S.push(G.maskDefinitions[e]),n++,t||j++,t=!1):"?"===e?(t=!0,a++):(_+=e,n++)})}P.push(P.slice().pop()+1),C=$(),B=P.length>1?!0:!1}function y(){G.clearOnBlur&&(N=0,Z=0,H&&0!==R.length||(T="",a.val(""),e.$apply(function(){r.$viewValue=""}))),R!==J&&w(a[0]),J=R}function w(e){var n;angular.isFunction(window.Event)&&!e.fireEvent?(n=new Event("change",{view:window,bubbles:!0,cancelable:!1}),e.dispatchEvent(n)):"createEvent"in document?(n=document.createEvent("HTMLEvents"),n.initEvent("change",!1,!0),e.dispatchEvent(n)):e.fireEvent&&e.fireEvent("onchange")}function E(e){"mousedown"===e.type?a.bind("mouseout",M):a.unbind("mouseout",M)}function M(){Z=A(this),a.unbind("mouseout",M)}function V(n){n=n||{};var t=n.which,i=n.type;if(16!==t&&91!==t){var u,l=a.val(),o=z,c=!1,s=p(l),f=F,h=O(this)||0,d=N||0,g=h-d,v=P[0],b=P[s.length]||P.slice().shift(),$=Z||0,k=A(this)>0,y=$>0,w=l.length>o.length||$&&l.length>o.length-$,E=l.length<o.length||$&&l.length===o.length-$,M=t>=37&&40>=t&&n.shiftKey,V=37===t,S=8===t||"keyup"!==i&&E&&-1===g,_=46===t||"keyup"!==i&&E&&0===g&&!y,C=(V||S||"click"===i)&&h>v;if(Z=A(this),!M&&(!k||"click"!==i&&"keyup"!==i)){if("input"===i&&E&&!y&&s===f){for(;S&&h>v&&!x(h);)h--;for(;_&&b>h&&-1===P.indexOf(h);)h++;var j=P.indexOf(h);s=s.substring(0,j)+s.substring(j+1),c=!0}for(u=m(s),z=u,F=s,!c&&l.length>u.length&&(c=!0),a.val(u),c&&e.$apply(function(){r.$setViewValue(s)}),w&&v>=h&&(h=v+1),C&&h--,h=h>b?b:v>h?v:h;!x(h)&&h>v&&b>h;)h+=C?-1:1;(C&&b>h||w&&!x(d))&&h++,N=h,D(this,h)}}}function x(e){return P.indexOf(e)>-1}function O(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection&&n(a[0])){e.focus();var t=document.selection.createRange();return t.moveStart("character",e.value?-e.value.length:0),t.text.length}return 0}function D(e,t){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)n(a[0])&&(e.focus(),e.setSelectionRange(t,t));else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}function A(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var P,S,_,C,j,R,T,H,z,F,N,Z,B=!1,L=!1,q=i.placeholder,I=i.maxlength,K=r.$isEmpty;r.$isEmpty=function(e){return K(B?p(e||""):e)};var W=!1;i.$observe("modelViewValue",function(e){"true"===e&&(W=!0)});var G={};i.uiOptions?(G=e.$eval("["+i.uiOptions+"]"),G=angular.isObject(G[0])?function(e,n){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===n[t]?n[t]=angular.copy(e[t]):angular.isObject(n[t])&&!angular.isArray(n[t])&&(n[t]=angular.extend({},e[t],n[t])));return n}(t,G[0]):t):G=t,i.$observe("uiMask",u),angular.isDefined(i.uiMaskPlaceholder)?i.$observe("uiMaskPlaceholder",l):i.$observe("placeholder",l),angular.isDefined(i.uiMaskPlaceholderChar)&&i.$observe("uiMaskPlaceholderChar",o),r.$formatters.push(c),r.$parsers.unshift(s);var J=a.val();a.bind("mousedown mouseup",E),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var n=Object(this),t=n.length>>>0;if(0===t)return-1;var a=0;if(arguments.length>1&&(a=Number(arguments[1]),a!==a?a=0:0!==a&&a!==1/0&&a!==-(1/0)&&(a=(a>0||-1)*Math.floor(Math.abs(a)))),a>=t)return-1;for(var i=a>=0?a:Math.max(t-Math.abs(a),0);t>i;i++)if(i in n&&n[i]===e)return i;return-1})}}}}])}();